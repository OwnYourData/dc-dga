<div class="container my-5">
  <h1 class="mb-4"><%= t('info.faq_header') %></h1>

  <div class="accordion" id="kbAccordion">
    <% @knowledgebases.each_with_index do |kb, idx| %>
      <% collapse_id = "kb-collapse-#{kb.id || idx}" %>
      <% heading_id  = "kb-heading-#{kb.id || idx}" %>
      <% target_url  = kb.link.present? ? kb.link : article_path(kb) %>

      <div class="accordion-item">
        <h2 class="accordion-header" id="<%= heading_id %>">
          <button class="accordion-button collapsed" type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#<%= collapse_id %>"
                  aria-expanded="false"
                  aria-controls="<%= collapse_id %>">
            <% if kb.icon.present? %>
              <i class="bi bi-<%= kb.icon %> me-2"></i>
            <% end %>
            <span class="fw-semibold"><%= kb.title %></span>
          </button>
        </h2>

        <div id="<%= collapse_id %>" class="accordion-collapse collapse"
             aria-labelledby="<%= heading_id %>" data-bs-parent="#kbAccordion">
          <div class="accordion-body">
            <p class="mb-3"><%= simple_format(kb.intro) %></p>
            <%= link_to t('info.faq_continue')+" â†’", article_path(id: kb.short), class: "btn btn-sm btn-outline-primary" %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>