<section class="pt-5 pb-5 py-10 scroll-offset" id="faq">
  <div class="container">
    <div class="services-header text-center mb-5 mb-lg-6">
      <h2 class="fw-bold display-5 mb-3"><%= t('info.faq_header') %></h2>
      <p class="lead text-muted mx-auto services-intro">
        <%= t("landing.faq.intro").html_safe %>
      </p>
    </div>
    <div class="container my-5">
      <div class="accordion" id="kbAccordion">
        <% @faq.each_with_index do |kb, idx| %>
          <% collapse_id = "kb-collapse-#{kb.id || idx}" %>
          <% heading_id  = "kb-heading-#{kb.id || idx}" %>
          <% target_url  = kb.link.present? ? kb.link : article_path(kb) %>

          <div class="accordion-item">
            <h2 class="accordion-header" id="<%= heading_id %>">
              <button class="accordion-button collapsed" type="button"
                      data-bs-toggle="collapse"
                      data-bs-target="#<%= collapse_id %>"
                      aria-expanded="false"
                      aria-controls="<%= collapse_id %>">
                <% if kb.icon.present? %>
                  <i class="bi bi-<%= kb.icon %> me-2"></i>
                <% end %>
                <span class="fw-semibold"><%= kb.title %></span>
              </button>
            </h2>

            <div id="<%= collapse_id %>" class="accordion-collapse collapse"
                 aria-labelledby="<%= heading_id %>" data-bs-parent="#kbAccordion">
              <div class="accordion-body">
                <p class="mb-3"><%= simple_format(kb.intro) %></p>
                <%= link_to t('info.faq_continue')+" â†’", article_path(id: kb.short), class: "btn btn-sm btn-outline-primary" %>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</section>